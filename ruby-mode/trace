# -*- mode: snippet -*-
# name: trace with TracePoint
# key: trace
# group: debug
# type: snippet
# --
trace = TracePoint.trace(:call, :return, :raise) do |tp|
  trace_message = "#{tp.defined_class}##{tp.method_id} at #{tp.path}:#{tp.lineno}"
  case tp.event
  when :call
    puts "→ #{trace_message}"
  when :return
    puts "← #{trace_message}"
  when :raise
    puts "! #{trace_message} raised #{tp.raised_exception}"
  end
end

$0

# trace.disable
